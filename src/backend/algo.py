import math
from get_from_api import get_loc
with_cars = []
without_cars = [
    {'Start' : 'NL Aryavarta','Destination' : 'NESCO IT Park, Goregaon East'},
    {'Start' : 'Northen Heights','Destination' : 'Mindspace IT Park, Malad West'}
]

dests = {
    'Mindspace IT Park, Malad West' : [19.17951074505066,72.8336347180646],
    'NESCO IT Park, Goregaon East': [19.152658122642805,72.85572098830079],
    'Raheja Mindspace IT Park, Navi Mumbai': [19.051220251588834,73.02886390106269],
}

starts = {
	'NL Aryavarta' : [19.26027, 72.86593],
	'Northen Heights' : [19.25019, 72.86359]
}

# Get nearest distance of all points on path from the destination.
def get_nearest_from_point(locs,point):
    nearest_from_point = float('inf')
    nearest_from_point_pos = None
    for i in range(len(locs)):
        # print(locs[i])
        dist = math.sqrt((locs[i][0] - point[0])**2 + (locs[i][1] - point[1])**2)
        if dist < nearest_from_point:
            nearest_from_point = dist
            nearest_from_point_pos = i
    
    # print(f"Nearest point is : {nearest_from_point} away which is {nearest_from_point_pos}")
    return nearest_from_point


# Compare this for all.

output = {
    'hints': {'visited_nodes.sum': 130, 'visited_nodes.average': 130.0}, 'info': {'copyrights': ['GraphHopper', 'OpenStreetMap contributors'], 'took': 6}, 'paths': [{'distance': 15703.542, 'weight': 2853.271282, 'time': 3175153, 'transfers': 0, 'points_encoded': False, 'bbox': [72.841509, 19.15261, 72.866021, 19.260693], 'points': {'type': 'LineString', 'coordinates': [[72.866021, 19.260566], [72.865557, 19.260693], [72.865246, 19.259879], [72.864875, 19.259889], [72.863367, 19.259831], [72.862334, 19.259771], [72.862014, 19.259789], [72.861353, 19.259596], [72.86102, 19.25946], [72.859561, 19.258943], [72.859524, 19.258908], [72.859507, 19.258849], [72.859447, 19.258409], [72.859346, 19.25813], [72.859338, 19.257979], [72.859201, 19.257012], [72.859122, 19.256698], [72.859088, 19.256458], [72.859091, 19.256247], [72.858983, 19.25594], [72.859043, 19.255631], [72.859128, 19.255524], [72.85933, 19.255414], [72.859463, 19.255381], [72.859678, 19.255367], [72.859679, 19.255333], [72.859456, 19.255345], [72.859284, 19.255397], [72.859085, 19.255515], [72.859037, 19.255564], [72.858989, 19.255662], [72.858943, 19.255901], [72.858922, 19.255921], [72.858249, 19.256089], [72.858202, 19.25608], [72.858129, 19.256025], [72.858087, 19.255925], [72.857985, 19.254872], [72.858015, 19.254497], [72.858674, 19.25306], [72.859087, 19.249721], [72.859152, 19.24865], [72.859115, 19.246548], [72.858951, 19.243864], [72.858809, 19.242299], [72.858613, 19.241122], [72.858525, 19.240503], [72.85836, 19.239556], [72.857926, 19.237635], [72.857831, 19.236746], [72.857794, 19.23658], [72.857704, 19.236573], [72.857364, 19.236496], [72.856551, 19.23602], [72.856412, 19.235919], [72.856243, 19.23572], [72.855972, 19.235335], [72.855628, 19.235015], [72.855563, 19.234983], [72.855466, 19.234966], [72.855174, 19.234971], [72.854306, 19.235129], [72.853602, 19.23523], [72.853649, 19.233576], [72.853633, 19.233516], [72.853652, 19.233502], [72.853662, 19.233445], [72.853641, 19.233418], [72.853604, 19.232934], [72.853615, 19.23252], [72.853605, 19.231675], [72.853575, 19.231024], [72.853591, 19.231012], [72.853625, 19.230945], [72.853611, 19.230891], [72.853578, 19.230853], [72.853507, 19.230835], [72.853444, 19.23086], [72.853419, 19.23089], [72.852806, 19.230871], [72.852735, 19.228676], [72.852072, 19.228674], [72.852096, 19.228069], [72.852098, 19.227484], [72.852029, 19.22646], [72.851952, 19.22585], [72.851114, 19.225878], [72.850904, 19.225184], [72.850639, 19.224516], [72.850271, 19.223675], [72.850188, 19.223346], [72.850095, 19.223083], [72.849814, 19.222862], [72.849079, 19.222423], [72.848676, 19.222349], [72.847842, 19.222165], [72.847805, 19.220377], [72.847859, 19.220088], [72.84791, 19.219354], [72.844839, 19.21907], [72.844807, 19.218301], [72.844746, 19.21539], [72.844706, 19.215293], [72.844843, 19.214173], [72.844687, 19.212464], [72.844635, 19.212369], [72.84456, 19.212265], [72.844342, 19.211709], [72.844235, 19.21086], [72.844177, 19.210215], [72.843856, 19.209066], [72.843377, 19.208985], [72.843483, 19.208516], [72.843379, 19.208321], [72.843631, 19.208038], [72.843664, 19.207768], [72.843803, 19.20714], [72.843718, 19.207094], [72.843731, 19.206788], [72.843773, 19.206519], [72.843772, 19.206392], [72.843613, 19.205646], [72.843533, 19.205079], [72.843536, 19.204435], [72.842996, 19.203869], [72.842858, 19.203272], [72.842582, 19.202208], [72.842248, 19.201473], [72.84187, 19.200319], [72.841803, 19.200325], [72.841798, 19.199804], [72.841761, 19.199606], [72.841751, 19.198951], [72.842432, 19.198955], [72.842437, 19.198079], [72.842632, 19.195796], [72.842676, 19.195477], [72.842751, 19.194537], [72.842788, 19.194337], [72.842718, 19.194227], [72.842213, 19.193615], [72.841667, 19.193046], [72.841509, 19.192837], [72.84255, 19.192536], [72.842098, 19.191463], [72.841926, 19.190986], [72.841932, 19.190554], [72.84214, 19.189168], [72.842112, 19.188777], [72.842027, 19.188316], [72.841989, 19.187347], [72.842014, 19.187053], [72.841718, 19.185275], [72.842359, 19.185141], [72.842306, 19.18471], [72.842289, 19.184304], [72.842242, 19.183861], [72.842149, 19.183495], [72.842122, 19.183317], [72.842125, 19.182753], [72.842101, 19.18265], [72.842156, 19.182044], [72.842344, 19.180531], [72.84243, 19.180137], [72.842423, 19.179843], [72.842471, 19.17904], [72.84273, 19.17897], [72.843382, 19.17896], [72.844748, 19.178816], [72.845, 19.178772], [72.845377, 19.178516], [72.845635, 19.178372], [72.846309, 19.178123], [72.847073, 19.178041], [72.84855, 19.177801], [72.849106, 19.177219], [72.849284, 19.177008], [72.84924, 19.17695], [72.849295, 19.176618], [72.849246, 19.176501], [72.849312, 19.1753], [72.849401, 19.174326], [72.84939, 19.173566], [72.849452, 19.173188], [72.849564, 19.17202], [72.849658, 19.170415], [72.849576, 19.170166], [72.849626, 19.169229], [72.849581, 19.168421], [72.849594, 19.168266], [72.849669, 19.168114], [72.84984, 19.168043], [72.849834, 19.167809], [72.850344, 19.167805], [72.850844, 19.167648], [72.850365, 19.166909], [72.850686, 19.166775], [72.851394, 19.166218], [72.851641, 19.166147], [72.852638, 19.166222], [72.852699, 19.165002], [72.852811, 19.164767], [72.852607, 19.164546], [72.852677, 19.163593], [72.852784, 19.162894], [72.852816, 19.162103], [72.852798, 19.161376], [72.853265, 19.16128], [72.85377, 19.161227], [72.854253, 19.161202], [72.854368, 19.159803], [72.854768, 19.15906], [72.854439, 19.158713], [72.854311, 19.15849], [72.854159, 19.157967], [72.85397, 19.157542], [72.854654, 19.157203], [72.855566, 19.156899], [72.856465, 19.156863], [72.85642, 19.15617], [72.856516, 19.15577], [72.856704, 19.155183], [72.856639, 19.155007], [72.856545, 19.154444], [72.856437, 19.153587], [72.856363, 19.15261]]}, 'instructions': [{'distance': 50.716, 'heading': 286.14, 'sign': 0, 'interval': [0, 1], 'text': 'Continue', 'time': 10143, 'street_name': ''}, {'distance': 96.164, 'sign': -2, 'interval': [1, 2], 'text': 'Turn left onto N L Complex Road', 'time': 19233, 'street_name': 'N L Complex Road'}, {'distance': 1067.445, 'sign': 2, 'interval': [2, 24], 'text': 'Turn right onto Prataprao Gujjar Rd Road No 3', 'time': 214104, 'street_name': 'Prataprao Gujjar Rd Road No 3'}, {'distance': 3.715, 'sign': 2, 'interval': [24, 25], 'text': 'Turn right onto Hari Shankar Joshi Road', 'time': 743, 'street_name': 'Hari Shankar Joshi Road'}, {'distance': 334.267, 'sign': 2, 'interval': [25, 37], 'text': 'Turn right', 'time': 66853, 'street_name': ''}, {'distance': 2061.897, 'sign': 0, 'interval': [37, 50], 'text': 'Continue', 'time': 414375, 'street_name': ''}, {'distance': 511.814, 'sign': 2, 'interval': [50, 62], 'text': 'Turn right onto Rokadia Lane', 'time': 102363, 'street_name': 'Rokadia Lane'}, {'distance': 190.773, 'sign': -2, 'interval': [62, 64], 'text': 'Turn left', 'time': 38154, 'street_name': ''}, {'exit_number': 3, 'distance': 279.125, 'sign': 6, 'exited': True, 'turn_angle': 2.97, 'interval': [64, 71], 'text': 'At roundabout, take exit 3 onto Sodawala Lane', 'time': 55825, 'street_name': 'Sodawala Lane'}, {'distance': 2.164, 'sign': -2, 'interval': [71, 72], 'text': 'Turn left', 'time': 433, 'street_name': ''}, {'distance': 27.557, 'sign': 7, 'interval': [72, 76], 'text': 'Keep right', 'time': 5511, 'street_name': ''}, {'distance': 11.452, 'sign': 1, 'interval': [76, 78], 'text': 'Turn slight right', 'time': 2290, 'street_name': ''}, {'distance': 64.457, 'sign': -2, 'interval': [78, 79], 'text': 'Turn left onto Chandavarkar Lane', 'time': 12891, 'street_name': 'Chandavarkar Lane'}, {'distance': 244.229, 'sign': -2, 'interval': [79, 80], 'text': 'Turn left onto Punjabi Lane', 'time': 48846, 'street_name': 'Punjabi Lane'}, {'distance': 69.557, 'sign': 2, 'interval': [80, 81], 'text': 'Turn right', 'time': 13911, 'street_name': ''}, {'distance': 315.032, 'sign': -2, 'interval': [81, 85], 'text': 'Turn left onto G Thackersey Lane (Factory Lane)', 'time': 61897, 'street_name': 'G Thackersey Lane (Factory Lane)'}, {'distance': 88.05, 'sign': 2, 'interval': [85, 86], 'text': 'Turn right onto A S Vartak Marg', 'time': 17610, 'street_name': 'A S Vartak Marg'}, {'distance': 260.809, 'sign': -2, 'interval': [86, 89], 'text': 'Turn left', 'time': 52161, 'street_name': ''}, {'distance': 331.24, 'sign': 0, 'interval': [89, 95], 'text': 'Continue onto Shimpoli Road', 'time': 66248, 'street_name': 'Shimpoli Road'}, {'distance': 313.379, 'sign': -2, 'interval': [95, 98], 'text': 'Turn left onto Haridas Nagar Road', 'time': 63189, 'street_name': 'Haridas Nagar Road'}, {'distance': 323.98, 'sign': 2, 'interval': [98, 99], 'text': 'Turn right onto Sai Baba Mandir Road', 'time': 64796, 'street_name': 'Sai Baba Mandir Road'}, {'distance': 546.437, 'sign': -2, 'interval': [99, 103], 'text': 'Turn left', 'time': 108912, 'street_name': ''}, {'distance': 633.069, 'sign': 1, 'interval': [103, 111], 'text': 'Turn slight right onto Mantanpada Road', 'time': 132182, 'street_name': 'Mantanpada Road'}, {'distance': 528.95, 'sign': -2, 'interval': [111, 123], 'text': 'Turn left', 'time': 120694, 'street_name': ''}, {'distance': 84.756, 'sign': 1, 'interval': [123, 124], 'text': 'Turn slight right', 'time': 16951, 'street_name': ''}, {'distance': 413.023, 'sign': -1, 'interval': [124, 128], 'text': 'Turn slight left onto Mahatma Gandhi Cross Road No 3', 'time': 82604, 'street_name': 'Mahatma Gandhi Cross Road No 3'}, {'distance': 7.119, 'sign': 2, 'interval': [128, 129], 'text': 'Turn right', 'time': 1424, 'street_name': ''}, {'distance': 153.265, 'sign': -2, 'interval': [129, 132], 'text': 'Turn left', 'time': 30653, 'street_name': ''}, {'distance': 71.537, 'sign': -2, 'interval': [132, 133], 'text': 'Turn left', 'time': 14307, 'street_name': ''}, {'distance': 515.455, 'sign': 2, 'interval': [133, 138], 'text': 'Turn right', 'time': 103091, 'street_name': ''}, {'distance': 214.547, 'sign': 1, 'interval': [138, 142], 'text': 'Turn slight right onto Adarsha Dughdalaya Road', 'time': 42910, 'street_name': 'Adarsha Dughdalaya Road'}, {'distance': 114.387, 'sign': -3, 'interval': [142, 143], 'text': 'Turn sharp left onto Chunilal Giridharlal Road', 'time': 22877, 'street_name': 'Chunilal Giridharlal Road'}, {'distance': 591.699, 'sign': 2, 'interval': [143, 150], 'text': 'Turn right onto Bhailal Jhaveri Patel Road', 'time': 118339, 'street_name': 'Bhailal Jhaveri Patel Road'}, {'distance': 232.897, 'sign': 0, 'interval': [150, 152], 'text': 'Continue', 'time': 46578, 'street_name': ''}, {'distance': 68.955, 'sign': -2, 'interval': [152, 153], 'text': 'Turn left', 'time': 13791, 'street_name': ''}, {'distance': 683.244, 'sign': 2, 'interval': [153, 165], 'text': 'Turn right onto Nanabhai Bhuleshwar Marg', 'time': 136649, 'street_name': 'Nanabhai Bhuleshwar Marg'}, {'distance': 424.382, 'sign': -2, 'interval': [165, 172], 'text': 'Turn left onto Chincholi Bunder Road', 'time': 85560, 'street_name': 'Chincholi Bunder Road'}, {'distance': 355.395, 'sign': -1, 'interval': [172, 176], 'text': 'Turn slight left onto Chinchawali Bunder Road', 'time': 79788, 'street_name': 'Chinchawali Bunder Road'}, {'distance': 1042.913, 'sign': 2, 'interval': [176, 192], 'text': 'Turn right onto Chinchwali Road', 'time': 208583, 'street_name': 'Chinchwali Road'}, {'distance': 108.946, 'sign': -2, 'interval': [192, 194], 'text': 'Turn left', 'time': 21789, 'street_name': ''}, {'distance': 96.32, 'sign': 3, 'interval': [194, 195], 'text': 'Turn sharp right onto Gogate Wadi Rd.', 'time': 19264, 'street_name': 'Gogate Wadi Rd.'}, {'distance': 265.917, 'sign': -2, 'interval': [195, 199], 'text': 'Turn left onto Aarey Road', 'time': 56128, 'street_name': 'Aarey Road'}, {'distance': 164.397, 'sign': 2, 'interval': [199, 201], 'text': 'Turn right onto D. Pendse Marg', 'time': 32879, 'street_name': 'D. Pendse Marg'}, {'distance': 32.651, 'sign': 2, 'interval': [201, 202], 'text': 'Turn right', 'time': 6530, 'street_name': ''}, {'distance': 353.617, 'sign': -7, 'interval': [202, 206], 'text': 'Keep left onto Road No.2', 'time': 70723, 'street_name': 'Road No.2'}, {'distance': 154.343, 'sign': -2, 'interval': [206, 209], 'text': 'Turn left onto I B Patel Road', 'time': 30869, 'street_name': 'I B Patel Road'}, {'distance': 248.702, 'sign': 2, 'interval': [209, 211], 'text': 'Turn right', 'time': 49741, 'street_name': ''}, {'distance': 191.577, 'sign': 2, 'interval': [211, 215], 'text': 'Turn right onto Walbhat Road', 'time': 38316, 'street_name': 'Walbhat Road'}, {'distance': 277.267, 'sign': -2, 'interval': [215, 218], 'text': 'Turn left', 'time': 55453, 'street_name': ''}, {'distance': 190.96, 'sign': 2, 'interval': [218, 221], 'text': 'Turn right', 'time': 38192, 'street_name': ''}, {'distance': 288.993, 'sign': 1, 'interval': [221, 225], 'text': 'Turn slight right onto Service Road', 'time': 57800, 'street_name': 'Service Road'}, {'distance': 0.0, 'sign': 4, 'last_heading': 184.49813961007638, 'interval': [225, 225], 'text': 'Arrive at destination', 'time': 0, 'street_name': ''}], 'legs': [], 'details': {'surface': [[0, 50, 'missing'], [50, 60, 'asphalt'], [60, 124, 'missing'], [124, 125, 'asphalt'], [125, 127, 'missing'], [127, 128, 'asphalt'], [128, 134, 'missing'], [134, 142, 'asphalt'], [142, 225, 'missing']], 'road_class': [[0, 2, 'residential'], [2, 19, 'tertiary'], [19, 24, 'secondary'], [24, 25, 'residential'], [25, 37, 'secondary'], [37, 71, 'tertiary'], [71, 72, 'primary'], [72, 79, 'tertiary'], [79, 80, 'residential'], [80, 81, 'secondary'], [81, 95, 'residential'], [95, 98, 'tertiary'], [98, 99, 'residential'], [99, 105, 'tertiary'], [105, 110, 'residential'], [110, 115, 'track'], [115, 142, 'residential'], [142, 143, 'secondary'], [143, 150, 'tertiary'], [150, 153, 'residential'], [153, 165, 'tertiary'], [165, 172, 'secondary'], [172, 174, 'residential'], [174, 175, 'service'], [175, 176, 'residential'], [176, 199, 'tertiary'], [199, 206, 'residential'], [206, 209, 'tertiary'], [209, 218, 'residential'], [218, 221, 'tertiary'], [221, 225, 'secondary']]}, 'ascend': 111.40399956703186, 'descend': 99.77599906921387, 'snapped_waypoints': {'type': 'LineString', 'coordinates': [[72.866021, 19.260566], [72.856363, 19.15261]]}}]}
for i in without_cars:
    all_dest_dist = []
    all_start_dist = []
    for j in range(len(with_cars)):
        start_points = list(reversed(starts[with_cars[j]['Start']]))
        dest_points = list(reversed(dests[with_cars[j]['Destination']]))
        points = [dest_points,start_points]
        # print(points)
        # data = get_loc(points)
        # print(output["paths"][0]["points"]["coordinates"],'\n',start_points)
        all_dest_dist.append(get_nearest_from_point(output["paths"][0]["points"]["coordinates"],dest_points))
        all_start_dist.append(get_nearest_from_point(output["paths"][0]["points"]["coordinates"],start_points))

    print(all_dest_dist, all_start_dist)

    with_cars = [x for y, x in sorted(zip(all_start_dist, with_cars))]
    print(with_cars)
for i in output["paths"]:
    print(i["points"]["coordinates"])
